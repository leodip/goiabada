---
title: OpenID Connect scopes
description: Standard OIDC scopes for retrieving identity information.
---

Besides the authorization scopes that are formed by resources and permissions (as explained in [Resources and permissions](/concepts/resources-permissions/)), Goiabada supports typical OpenID Connect scopes.

## Available OIDC scopes

<table>
  <thead>
    <tr>
      <th style="white-space: nowrap;">OIDC scope</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="white-space: nowrap;"><code>openid</code></td>
      <td>Will include an <code>id_token</code> in the token response, with the subject identifier (<code>sub</code> claim)</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>profile</code></td>
      <td>Access to claims: <code>name</code>, <code>family_name</code>, <code>given_name</code>, <code>middle_name</code>, <code>nickname</code>, <code>preferred_username</code>, <code>profile</code>, <code>picture</code>, <code>website</code>, <code>gender</code>, <code>birthdate</code>, <code>zoneinfo</code>, <code>locale</code>, and <code>updated_at</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>email</code></td>
      <td>Access to claims: <code>email</code>, <code>email_verified</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>address</code></td>
      <td>Access to the <code>address</code> claim</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>phone</code></td>
      <td>Access to claims: <code>phone_number</code> and <code>phone_number_verified</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>groups</code></td>
      <td>Access to the list of groups the user belongs to</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>attributes</code></td>
      <td>Access to the attributes assigned to the user by an admin, stored as key-value pairs</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>offline_access</code></td>
      <td>Access to a refresh token of the type <code>Offline</code>, allowing the client to obtain a new access token without requiring immediate user interaction</td>
    </tr>
  </tbody>
</table>

## Example usage

When making an authorization request, include the scopes you need:

```
GET /auth/authorize?
  client_id=my-app&
  redirect_uri=https://my-app.com/callback&
  response_type=code&
  scope=openid profile email groups&
  code_challenge=...&
  code_challenge_method=S256
```

The claims corresponding to the requested scopes are always available via the `/userinfo` endpoint. By default, they are also included in the ID token, but this can be configured globally or per-client (see [OIDC claims in tokens](#oidc-claims-in-tokens) below).

## Scope to claims mapping

When you request a scope, the following claims become available:

<table>
  <thead>
    <tr>
      <th style="white-space: nowrap;">Scope</th>
      <th>Claims in UserInfo response / ID token (if enabled)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="white-space: nowrap;"><code>openid</code></td>
      <td><code>sub</code> (always included)</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>profile</code></td>
      <td><code>name</code>, <code>given_name</code>, <code>middle_name</code>, <code>family_name</code>, <code>nickname</code>, <code>preferred_username</code>, <code>profile</code>, <code>picture</code>, <code>website</code>, <code>gender</code>, <code>birthdate</code>, <code>zoneinfo</code>, <code>locale</code>, <code>updated_at</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>email</code></td>
      <td><code>email</code>, <code>email_verified</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>address</code></td>
      <td><code>address</code> (structured object with <code>formatted</code>, <code>street_address</code>, <code>locality</code>, <code>region</code>, <code>postal_code</code>, <code>country</code>)</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>phone</code></td>
      <td><code>phone_number</code>, <code>phone_number_verified</code></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>groups</code></td>
      <td><code>groups</code> (array of group identifiers)</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;"><code>attributes</code></td>
      <td><code>attributes</code> (key-value map of custom attributes)</td>
    </tr>
  </tbody>
</table>

## OIDC claims in tokens

### ID token vs UserInfo endpoint

According to the OpenID Connect specification ([OIDC Core 5.4](https://openid.net/specs/openid-connect-core-1_0.html#ScopeClaims)), scope-related claims (from `profile`, `email`, `phone`, `address` scopes) **MAY** be included in ID tokens but **SHOULD** be retrieved from the `/userinfo` endpoint for strict conformance.

Goiabada gives you control over this behavior:

- **Default**: Claims are included in ID tokens (matches industry practice - Auth0, Microsoft, Keycloak)
- **Strict OIDC conformance**: Disable claims in ID tokens, forcing applications to use `/userinfo`
- **Hybrid approach**: Configure per-client based on application requirements

### Configuration

**Global setting** - Navigate to **Settings â†’ Tokens** in the admin console:
- **Include OIDC claims in ID tokens**: Controls default behavior for all clients
- Default: Enabled (matches industry standards)

**Per-client override** - In the client's **Tokens** settings:
- **Include OIDC claims in ID tokens**: Three options
  - `default` - Use the global setting
  - `on` - Always include claims in ID tokens for this client
  - `off` - Never include claims in ID tokens for this client (use `/userinfo` only)

### When to disable

Consider disabling OIDC claims in ID tokens when:

- **Strict OIDC conformance required** - Regulatory or security requirements mandate standard-compliant behavior
- **Token size concerns** - ID tokens are included in every redirect, smaller tokens improve performance
- **Claim freshness important** - Force applications to fetch current data from `/userinfo` instead of cached token claims
- **Security policy** - Separation of authentication (ID token) from user data (UserInfo endpoint)

### Important notes

import { Aside } from '@astrojs/starlight/components';

<Aside type="note">
- Core OpenID claims (`sub`, `iss`, `aud`, `exp`, `iat`, `auth_time`, `nonce`, `acr`, `amr`) are **always** included in ID tokens regardless of this setting
- The `groups` and `attributes` scopes are Goiabada-specific extensions and follow their own inclusion rules
- Claims are **always** available via the `/userinfo` endpoint regardless of this setting
</Aside>
